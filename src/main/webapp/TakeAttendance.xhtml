<ui:composition template="facultyTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="title">Take Attendance</ui:define>

    <ui:define name="content">

        <style>
            .form-container {
                max-width: 450px;
                margin: auto;
                padding: 25px;
                background: #fff;
                border-radius: 10px;
                border: 1px solid #ddd;
            }
            .form-field {
                margin-bottom: 15px;
            }
            label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
            }
            select {
                width: 100%;
                padding: 10px;
                border: 1px solid #ccc;
                border-radius: 5px;
            }
            .btn {
                background: #007bff;
                color: white;
                border: none;
                padding: 10px 15px;
                cursor: pointer;
                width: 100%;
                border-radius: 5px;
                font-size: 16px;
            }
            .btn:hover {
                background: #0056b3;
            }
        </style>
        <div style="position: relative; height: 40px;">

            <!-- Top-Right Back Button -->
            <h:link outcome="Faculty.jsf"
                    style="position:absolute;
                    right:0;
                    top:0;
                    padding:8px 16px;
                    background:#0a2342;
                    color:#ffffff;
                    border-radius:6px;
                    text-decoration:none;
                    font-size:14px;">
                â¬… Back to Home
            </h:link>

        </div>
        <h:form id="attendanceForm">
            <div class="form-container">

                <h2 style="text-align:center;">Select Course, Semester, Division - Subject</h2>

                <!-- COURSE -->
                <div class="form-field">
                    <label>Course</label>
                    <h:selectOneMenu id="course" value="#{updateCDIBean.selectedCourseId}" required="true" requiredMessage="Please Select a Course">
                        <f:selectItem itemLabel="--Select--" itemValue="" />
                        <f:selectItems value="#{updateCDIBean.courseList}" var="c"
                                       itemValue="#{c.courseId}" itemLabel="#{c.courseName}" />
                        <f:ajax listener="#{updateCDIBean.loadSemesters}" render="semesterPanel divisionPanel subjectPanel courseMsg" />
                    </h:selectOneMenu>
                    <h:message id="courseMsg" for="course" style="color:red; font-size:13px;" />
                </div>

                <!-- SEMESTER -->
                <h:panelGroup id="semesterPanel">
                    <h:panelGroup rendered="#{not empty updateCDIBean.semesterList}">
                        <div class="form-field">
                            <label>Semester</label>
                            <h:selectOneMenu id="semester" value="#{updateCDIBean.selectedSemId}" required="true" requiredMessage="Please Select a Semester">
                                <f:selectItem itemLabel="--Select--" itemValue="" />
                                <f:selectItems value="#{updateCDIBean.semesterList}" var="s"
                                               itemValue="#{s.semId}" itemLabel="#{s.semName}" />
                                <f:ajax listener="#{updateCDIBean.loadDivisionAndSubject}" render="divisionPanel subjectPanel semMsg" />
                            </h:selectOneMenu>
                            <h:message id="semMsg" for="semester" style="color:red; font-size:13px;" />
                        </div>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- DIVISION -->
                <h:panelGroup id="divisionPanel">
                    <h:panelGroup rendered="#{not empty updateCDIBean.divisionList}">
                        <div class="form-field">
                            <label>Division</label>
                            <h:selectOneMenu id="division" value="#{updateCDIBean.selectedStudentDivId}" required="true" requiredMessage="Please Select a Division">
                                <f:selectItem itemLabel="--Select--" itemValue="" />
                                <f:selectItems value="#{updateCDIBean.divisionList}" var="d"
                                               itemValue="#{d.divId}" itemLabel="#{d.divName}" />
                            </h:selectOneMenu>
                            <h:message id="divMsg" for="division" style="color:red; font-size:13px;" />
                        </div>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- SUBJECT -->
                <h:panelGroup id="subjectPanel">
                    <h:panelGroup rendered="#{not empty updateCDIBean.subjectList}">
                        <div class="form-field">
                            <label>Subject</label>
                            <h:selectOneMenu id="subject" value="#{updateCDIBean.updateSubId}" required="true" requiredMessage="Please Select a Subject">
                                <f:selectItem itemLabel="--Select--" itemValue="" />
                                <f:selectItems value="#{updateCDIBean.subjectList}" var="sub"
                                               itemValue="#{sub.subId}" itemLabel="#{sub.subName}" />
                            </h:selectOneMenu>
                            <h:message id="subMsg" for="subject" style="color:red; font-size:13px;" />
                        </div>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- Button -->
                <h:commandButton value="Load Students"
                                 styleClass="btn"
                                 action="#{updateCDIBean.goToAttendancePage}" />

            </div>
        </h:form>

    </ui:define>

</ui:composition>
