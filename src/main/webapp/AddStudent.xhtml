<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <h:head>
        <title>Add Student</title>
        <link href="CSS/Division.css" rel="stylesheet" type="text/css"/>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    </h:head>

    <h:body>

        <h:panelGroup rendered="#{adminCDIBean.successMessage != null}">
            <script>
                Swal.fire({
                    icon: 'success',
                    title: 'Success!',
                    text: '#{adminCDIBean.successMessage}',
                    confirmButtonColor: '#4da6ff',
                    confirmButtonText: 'OK'
                });
            </script>
        </h:panelGroup>

        <div class="form-box">
            <h2>Add Student</h2>

            <h:form>

                <!-- Student Name -->
                <div class="form-field">
                    <h:outputLabel value="Student Name:" for="sname" />
                    <h:inputText id="sname"
                                 value="#{adminCDIBean.studentName}"
                                 required="true"
                                 requiredMessage="Enter student name"
                                 a:placeholder="Enter Student Name"/>
                    <h:message for="sname" styleClass="error-msg"/>
                </div>

                <!-- Roll Number -->
                <div class="form-field">
                    <h:outputLabel value="Roll No:" for="roll" />
                    <h:inputText id="roll"
                                 value="#{adminCDIBean.studentRoll}"
                                 required="true"
                                 requiredMessage="Enter roll number"
                                 a:placeholder="Enter Roll Number"/>
                    <h:message for="roll" styleClass="error-msg"/>
                </div>

                <div class="form-field">
                    <h:outputLabel value="Course:" for="course" />
                    <h:selectOneMenu id="course"
                                     value="#{adminCDIBean.studentCourseId}"
                                     required="true"
                                     requiredMessage="Please select a course"
                                     styleClass="select-box">
                        <f:selectItem itemLabel="--Select Course--" itemValue="" />
                        <f:selectItems value="#{adminCDIBean.courseList}" var="c"
                                       itemValue="#{c.courseId}" itemLabel="#{c.courseName}" />
                        <!-- Load Semesters on Course Change -->
                        <f:ajax listener="#{adminCDIBean.loadSemesters}" render="semPanel divPanel" execute="@this" />

                    </h:selectOneMenu>
                    <h:message for="course" style="color:red;" />
                </div>

                <!-- Semester -->
                <h:panelGroup id="semPanel">
                    <h:panelGroup rendered="#{not empty adminCDIBean.semesterList}">
                        <div class="form-field">
                            <h:outputLabel value="Semester:" for="sem" />
                            <h:selectOneMenu id="sem"
                                             value="#{adminCDIBean.studentSemesterId}"
                                             required="true"
                                             requiredMessage="Please select a semester"
                                             styleClass="select-box">
                                <f:selectItem itemLabel="--Select Semester--" itemValue="" />
                                <f:selectItems value="#{adminCDIBean.semesterList}" var="s"
                                               itemValue="#{s.semId}" itemLabel="#{s.semName}" />
                                <f:ajax listener="#{adminCDIBean.loadDivisions}" render="divPanel" execute="@this" />


                            </h:selectOneMenu>
                            <h:message for="sem" style="color:red;" />
                        </div>
                    </h:panelGroup>
                </h:panelGroup>


                <!-- Division -->
                <h:panelGroup id="divPanel">
                    <h:panelGroup rendered="#{not empty adminCDIBean.divisionList}">
                        <div class="form-field">
                            <h:outputLabel value="Division:" for="div" />
                            <h:selectOneMenu id="div"
                                             value="#{adminCDIBean.studentDivisionId}"
                                             required="true"
                                             requiredMessage="Please select a division"
                                             styleClass="select-box">
                                <f:selectItem itemLabel="--Select Division--" itemValue="" />
                                <f:selectItems value="#{adminCDIBean.divisionList}" var="d"
                                               itemValue="#{d.divId}" itemLabel="#{d.divName}" />
                            </h:selectOneMenu>
                            <h:message for="div" style="color:red;" />
                        </div>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- Submit Button -->
                <h:commandButton value="Add Student"
                                 action="#{adminCDIBean.insertStudent}"
                                 styleClass="btn" />

            </h:form>
        </div>

    </h:body>
</html>