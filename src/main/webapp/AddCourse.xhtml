<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <h:head>
        <title>Add Course</title>

        <!-- SweetAlert2 CDN -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <style>
            body {
                font-family: 'Poppins', sans-serif;
                background: #fafbfc;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: flex-start;
                padding-top: 50px;
                margin: 0;
            }

            h1 {
                color: #34495e;
                margin-bottom: 30px;
            }

            .form-container {
                background: white;
                padding: 30px 40px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                width: 400px;
                display: flex;
                flex-direction: column;
                gap: 20px;
            }

            input[type="text"] {
                padding: 12px;
                font-size: 16px;
                border: 1px solid #ccc;
                border-radius: 6px;
                width: 100%;
            }

            .btn {
                padding: 12px 25px;
                font-size: 16px;
                font-weight: 600;
                color: white;
                background: #4da6ff;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                transition: 0.3s;
            }

            .btn:hover {
                background: #1a73e8;
            }
        </style>
    </h:head>

    <h:body>
        <h1>Add New Course</h1>
        <h:form class="form-container">
            <h:outputLabel value="Course Name:" for="courseName" />
            <h:inputText id="courseName" value="#{adminCDIBean.courseName}" required="true"
                         requiredMessage="Course name is required." a:placeholder="Enter Course Name"/>

            <h:commandButton value="Add Course" action="#{adminCDIBean.addCourse}" styleClass="btn" />

            <h:message for="courseName" style="color:red;" />
        </h:form>

        <h:outputText id="msg" value="#{adminCDIBean.message}" style="display:none"/>

        <!-- SweetAlert Script -->
        <script>
            window.addEventListener('load', function () {
                var msgEl = document.getElementById('msg');
                if (msgEl) {
                    var msg = msgEl.innerHTML.trim();
                    console.log("Message received:", msg); // âœ… debug

                    if (msg !== '') {
                        var msgLower = msg.toLowerCase();
                        var icon;
                        if (msgLower.includes('success') || msgLower.includes('added')) {
                            icon = 'success';
                        } else {
                            icon = 'error';
                        }

                        Swal.fire({
                            icon: icon,
                            title: icon === 'success' ? 'Success!' : 'Error!',
                            text: msg,
                            showConfirmButton: true
                        });
                    }
                }
            });

        </script>


    </h:body>

</html>